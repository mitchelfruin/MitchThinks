---
title: 'Agent-based modelling: lizards & rock, paper, scissors.'
author: Mitchel Fruin
date: '2019-08-10'
slug: agent-based-modelling-lizards-rock-paper-scissors
categories: []
tags:
  - ABM
  - Complexity
  - Evolution
output:
  blogdown::html_page:
    toc: true
    toc_depth: 4
---


<div id="TOC">
<ul>
<li><a href="#rock-paper-scissors">Rock Paper Scissors</a></li>
</ul>
</div>

<p>NEED TO UPDATE WITH MY CODE, THIS IS SOMEONE ELSEâ€™S. JUST A PLACEHOLDER.</p>
<div id="rock-paper-scissors" class="section level2">
<h2>Rock Paper Scissors</h2>
<p>In this second example we are going to use the same game, but this time several individuals will play against each other. To make it more interesting individuals are organised on a lattice network. Thus, they can only play with their direct neighbors. If they lose, they have to take over the strategy of the winner and vice versa. This can also be seen as a very simple example of an evolutionary process.</p>
<pre class="r"><code># size of the lattice
sidelength&lt;-10 
# creating an empty data.frame to store data
stat&lt;-data.frame()
# creating a lattice network using the igraph package
l&lt;-graph.lattice(length=sidelength,dim=2)
# now every individual chooses a strategy at random
V(l)$weapon&lt;-sample(c(1:3), size=length(V(l)), replace=T)
# for a nicer visualisation lets colour the different options
V(l)[weapon==1]$color&lt;-&#39;blue&#39; # Paper
V(l)[weapon==2]$color&lt;-&#39;yellow&#39; # Scissors
V(l)[weapon==3]$color&lt;-&#39;green&#39; # Rock
# and this is what it looks like:
plot(l, layout=as.matrix(expand.grid(1:sidelength, 1:sidelength)), vertex.label=NA)</code></pre>
<p><img src="/interests/2019-08-10-agent-based-modelling-lizards-rock-paper-scissors_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code>for(t in 1:1000){
    # pick a random agent ...
    from &lt;- as.numeric(sample(V(l), 1)) # or sample(sidelength^2,1)
    # who are its neighbours?
    nei&lt;-neighbors(l, v=from, mode=&#39;all&#39;)
    
    # if there is only one weapon type left
    if(length(unique(V(l)$weapon))==1) {
        # we can either stop the simulation
        stop(paste(c(&#39;Paper&#39;,&#39;Scissors&#39;,&#39;Rock&#39;)[unique(V(l)$weapon)], &#39;has won the game after&#39;,t,&#39;rounds!&#39;))
        # or we let the selected individual choose a different strategy to let the dynamics go on
        # V(l)$weapon[from]&lt;-sample((1:3)[1:3!=as.numeric(V(l)$weapon[from])], 1)
    } else {
        # ... and one of its neighbours
        to &lt;- sample(nei, 1) 
        fromto&lt;-c(from,to)
        w&lt;-as.numeric(V(l)$weapon[fromto])
        # if both choices are equal, nothing happens:
        if(w[1]==w[2]) {} else{ 
            # in the case that one chooses Rock and the other Paper, Paper wins:
            if(max(w) == 3 &amp;&amp; min(w) ==1) { 
                V(l)$weapon[fromto[w==3]] &lt;- &quot;1&quot; 
            } 
            else{
                # for the two other cases, the better weapon wins:
                V(l)$weapon[fromto[w==min(w)]] &lt;- V(l)$weapon[fromto[w==max(w)]]
            }
        } 
        
    }
    # let&#39;s record the individual abundance of each strategy
    stat&lt;-rbind(stat, c(sum(V(l)$&#39;weapon&#39;==&quot;1&quot;), sum(V(l)$&#39;weapon&#39;==&quot;2&quot;), sum(V(l)$&#39;weapon&#39;==&quot;3&quot;)))
    # plot(l, layout=as.matrix(expand.grid(1:sidelength, 1:sidelength)), vertex.label=NA)
}
names(stat)&lt;-c(&quot;Paper&quot;,&quot;Scissors&quot;,&quot;Rock&quot;)
s&lt;-melt(stat)</code></pre>
<pre><code>## No id variables; using all as measure variables</code></pre>
<pre class="r"><code>s$time&lt;-1:nrow(stat)
ggplot(data=s, mapping=aes(x=time, y=value, col=variable)) + geom_line() + theme_bw() </code></pre>
<p><img src="/interests/2019-08-10-agent-based-modelling-lizards-rock-paper-scissors_files/figure-html/unnamed-chunk-1-2.png" width="672" /></p>
</div>
